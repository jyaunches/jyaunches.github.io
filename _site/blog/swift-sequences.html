<!doctype html>

<html class="no-js" lang="en">

<head>


	<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

	Julietta Yaunches

	- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->


	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

	<!-- Page Info -->
	<link rel="shortcut icon" href="/images/favicon.png">
	<title>Swift Collections & Sequences – Julietta Yaunches</title>
	<meta name="description" content="">

	<!-- Twitter Card -->
	<meta name="twitter:card" content="summary_large_image">
	<meta name="twitter:title" content="Swift Collections & Sequences – Julietta Yaunches">
	<meta name="twitter:description" content="">
	<meta name="twitter:image:src" content="http://localhost:4000/images/collection-and-sequence/collections.jpg">

	<!-- Facebook OpenGraph -->
	<meta property="og:title" content="Swift Collections & Sequences – Julietta Yaunches" />
	<meta property="og:description" content="" />
	<meta property="og:image" content="http://localhost:4000/images/collection-and-sequence/collections.jpg" />

	
	<!-- Font Embed Code -->
	<link href="https://fonts.googleapis.com/css?family=Montserrat:300,500" rel="stylesheet">
	

	<!-- Styles -->
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="/css/style.css">
	
	<!-- Icons -->
	<script defer src="https://use.fontawesome.com/releases/v5.1.1/js/solid.js" integrity="sha384-GXi56ipjsBwAe6v5X4xSrVNXGOmpdJYZEEh/0/GqJ3JTHsfDsF8v0YQvZCJYAiGu" crossorigin="anonymous"></script>
	<script defer src="https://use.fontawesome.com/releases/v5.1.1/js/brands.js" integrity="sha384-0inRy4HkP0hJ038ZyfQ4vLl+F4POKbqnaUB6ewmU4dWP0ki8Q27A0VFiVRIpscvL" crossorigin="anonymous"></script>
	<script defer src="https://use.fontawesome.com/releases/v5.1.1/js/fontawesome.js" integrity="sha384-NY6PHjYLP2f+gL3uaVfqUZImmw71ArL9+Roi9o+I4+RBqArA2CfW1sJ1wkABFfPe" crossorigin="anonymous"></script>

	
	<!-- Custom Styles -->
	<style></style>
	

	
	<!-- Analytics Code -->
	
	

	
	<!-- Extra Header JS Code -->
	
	
	
</head>


<body class="loading ajax-loading" data-site-url="http://localhost:4000" data-page-url="/blog/swift-sequences">


	<header class="header">

	<div class="header__content">

		
		<a href="/" class="header__title">
			Julietta Yaunches
		</a>
		

		<h1 class="header__tagline">Technologist, mobile architect and community leader based in Brooklyn, NY.</h1>

		<div class="menu">
			<div class="menu__toggle js-menu-toggle">
				<div class="menu__toggle__icon"><span></span></div>
			</div>
			<div class="menu__wrap">
				<ul class="menu__list">
					
					<li class="menu__list__item">
						<a href="/" class="menu__list__item__link">Current</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/blog/" class="menu__list__item__link">Blog</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/speaking/" class="menu__list__item__link">Speaking</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/brooklyn_swift/" class="menu__list__item__link">Brooklyn Swift</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/about" class="menu__list__item__link">About</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/contact" class="menu__list__item__link">Contact</a>
					</li>
					
				</ul>
			</div>
		</div>

		<div class="projects-menu">
			<ul class="menu__list">
				
				<li class="menu__list__item">
					<a href="/project/flexible-tech-experimentation" class="menu__list__item__link">Flexible Tech & Experimentation</a>
				</li>
				
				<li class="menu__list__item">
					<a href="/project/ioscon-london-llvm-and-abi-stability" class="menu__list__item__link">iOSCon Lightning Talk - March 2019</a>
				</li>
				
				<li class="menu__list__item">
					<a href="/project/ioscon-london-architecture-roadmapping-refactor-v-rewrite" class="menu__list__item__link">iOSCon Speaker - March 2019</a>
				</li>
				
				<li class="menu__list__item">
					<a href="/project/rewrite-versus-refactor" class="menu__list__item__link">Technology Roadmap: Rewrite vs Refactor</a>
				</li>
				
			</ul>
		</div>

		<div class="header__lower">

			<ul class="socials">
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
</ul>

			<div class="footer__copyright">
				<span>© 2019 Julietta Yaunches</span>
			</div>

		</div>

	</div>

</header>


	<div class="loader"><svg width="120" height="30" viewBox="0 0 120 30" xmlns="http://www.w3.org/2000/svg"><circle cx="15" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite" /><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite" /></circle><circle cx="60" cy="15" r="9" fill-opacity="0.3"><animate attributeName="r" from="9" to="9" begin="0s" dur="0.8s" values="9;15;9" calcMode="linear" repeatCount="indefinite" /><animate attributeName="fill-opacity" from="0.5" to="0.5" begin="0s" dur="0.8s" values=".5;1;.5" calcMode="linear" repeatCount="indefinite" /></circle><circle cx="105" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite" /><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite" /></circle></svg></div>

	<div class="page-loader"></div>

	
	<div class="page">

		<div class="page__content" data-page-title="Swift Collections & Sequences – Julietta Yaunches">

			<section class="intro">

	<div class="wrap">

		<h1>Swift Collections & Sequences</h1>
		<p>05 September 2016</p>

	</div>

</section>

<section class="single">

	<div class="wrap">

		<p>Swift is widely known and loved by programmers for different things. One of these are it’s Collections and the Sequence type that comes with it. Sequence is not just for Swift standard library collections, however. It can also, as a protocol, be applied to really any struct or class that wants to behave like a collection in Swift and implement the Sequence methods.</p>

<p>The most commonly used thing Sequence brings us is the abilty to use for-in loops.</p>

<p>This allows us to write things like:</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">let</span> <span class="nv">numbers</span> <span class="o">=</span> <span class="mi">1</span><span class="o">...</span><span class="mi">3</span>
<span class="k">for</span> <span class="n">number</span> <span class="k">in</span> <span class="n">numbers</span> <span class="p">{</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
<span class="p">}</span>
<span class="c1">// Prints "1"</span>
<span class="c1">// Prints "2"</span>
<span class="c1">// Prints "3"</span>
</code></pre></div></div>

<p>Without Sequence, we’d end up writing something like this:</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">let</span> <span class="nv">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>

<span class="k">let</span> <span class="nv">index</span> <span class="o">=</span> <span class="n">numbers</span><span class="o">.</span><span class="n">count</span>
<span class="k">var</span> <span class="nv">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">index</span> <span class="p">{</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">numbers</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
    <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="p">}</span>
</code></pre></div></div>

<p>So Sequence brings us for-in loops. But it turns out these are really at the root of everything we get with the Sequence type. Here are some of it’s more frequently used functions:</p>

<ul>
  <li>func dropFirst(_:)</li>
  <li>func dropLast(_:)</li>
  <li>func filter(_:)</li>
  <li>func forEach(_:)</li>
  <li>func map(_:)</li>
  <li>func split(_:omittingEmptySubsequences:whereSeparator:)</li>
  <li>func contains(where:)</li>
  <li>func first(where:)</li>
  <li>func reduce(<em>:</em>:)</li>
  <li>func reversed()</li>
  <li>func sorted(by:)</li>
</ul>

<p>Looking at these.. you can implement all of these using a for-in loop. Consider the implementation for contains(:).</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kd">func</span> <span class="nf">contains</span><span class="p">(</span><span class="nv">e</span><span class="p">:</span> <span class="kt">Element</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Bool</span> <span class="p">{</span>
  <span class="k">var</span> <span class="nv">elementFound</span> <span class="o">=</span> <span class="kc">false</span>
  <span class="k">for</span> <span class="n">item</span> <span class="k">in</span> <span class="n">elements</span> <span class="p">{</span>
    <span class="k">if</span> <span class="n">e</span> <span class="o">==</span> <span class="n">item</span> <span class="p">{</span>
      <span class="n">elementFound</span> <span class="o">=</span> <span class="kc">true</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="n">elementFound</span>
<span class="p">}</span>
</code></pre></div></div>

<p>It pretty uncomplicated stuff right? So, if you wanted to create your own custom collection and get the power of Sequence and all these useful methods. How do you do it? It’s fundamentally based in allowing the iteration of a for-in loop.</p>

<p>Let’s look at doing this for a pretty basic data structure, the linked list. So, a linked list is a set of instances that each have a reference to the next element in the set.</p>

<div class="gallery" data-columns="1">
  <img src="/images/collection-and-sequence/linked-list.png" />
</div>

<p>You know when you’ve reached the end because the reference to next is nil</p>

<p>Fundamentally, to implement a linked list, you’re going to need a representation of a link and something to represent the list. If we want to add Sequence type functionality… we’ll create both those classes as we would typically, but the list itself needs to implement both the Sequence and IteratorProtocol protocols. All we need to implement here is the next() function.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="kt">Link</span><span class="o">&lt;</span><span class="kt">T</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">value</span><span class="p">:</span> <span class="kt">T</span>
    <span class="k">let</span> <span class="nv">nextLink</span><span class="p">:</span> <span class="kt">Link</span><span class="o">&lt;</span><span class="kt">T</span><span class="o">&gt;</span><span class="p">?</span>
    
    <span class="nf">init</span><span class="p">(</span><span class="n">_</span> <span class="nv">value</span><span class="p">:</span> <span class="kt">T</span><span class="p">,</span> <span class="nv">next</span><span class="p">:</span> <span class="kt">Link</span><span class="o">&lt;</span><span class="kt">T</span><span class="o">&gt;</span><span class="p">?){</span>
        <span class="k">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">self</span><span class="o">.</span><span class="n">nextLink</span> <span class="o">=</span> <span class="n">next</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="kt">LinkedLink</span><span class="o">&lt;</span><span class="kt">T</span><span class="o">&gt;</span> <span class="p">:</span> <span class="kt">Sequence</span><span class="p">,</span> <span class="kt">IteratorProtocol</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">currentNode</span> <span class="p">:</span> <span class="kt">Link</span><span class="o">&lt;</span><span class="kt">T</span><span class="o">&gt;</span><span class="p">?</span>
    
    <span class="nf">init</span><span class="p">(</span><span class="nv">head</span><span class="p">:</span> <span class="kt">Link</span><span class="o">&lt;</span><span class="kt">T</span><span class="o">&gt;</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">currentNode</span> <span class="o">=</span> <span class="n">head</span>
    <span class="p">}</span>
    
    <span class="kd">func</span> <span class="nf">next</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">T</span><span class="p">?</span> <span class="p">{</span>
        <span class="k">if</span> <span class="k">let</span> <span class="nv">next</span> <span class="o">=</span> <span class="n">currentNode</span><span class="p">?</span><span class="o">.</span><span class="n">nextLink</span> <span class="p">{</span>
            <span class="n">currentNode</span> <span class="o">=</span> <span class="n">next</span>
            <span class="k">return</span> <span class="n">next</span><span class="o">.</span><span class="n">value</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="kc">nil</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">let</span> <span class="nv">elementFour</span> <span class="o">=</span> <span class="kt">Link</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="nv">next</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">elementThree</span> <span class="o">=</span> <span class="kt">Link</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="nv">next</span><span class="p">:</span> <span class="n">elementFour</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">elementTwo</span> <span class="o">=</span> <span class="kt">Link</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nv">next</span><span class="p">:</span> <span class="n">elementThree</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">elementOne</span> <span class="o">=</span> <span class="kt">Link</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nv">next</span><span class="p">:</span> <span class="n">elementTwo</span><span class="p">)</span>

<span class="k">let</span> <span class="nv">linkedList</span> <span class="o">=</span> <span class="kt">LinkedLink</span><span class="p">(</span><span class="nv">head</span><span class="p">:</span> <span class="n">elementOne</span><span class="p">)</span>

<span class="k">for</span> <span class="n">item</span> <span class="k">in</span> <span class="n">linkedList</span> <span class="p">{</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">// prints 2</span>
<span class="c1">// prints 3</span>
<span class="c1">// prints 4</span>

<span class="n">linkedList</span><span class="o">.</span><span class="nf">contains</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>  <span class="c1">//true</span>

</code></pre></div></div>

<p>Notably, with this linked list example.. we don’t get the first element, or the head, printed. This is down to the fact that our implementation of next(), when called for the first time returns the second link.. which we then print. This could be solved by introducing a subclass of Link to represent the head and then to instantiate the LinkedList with this.</p>

<h3 id="summing-it-up">Summing it Up</h3>

<p>So, the Sequence protocol is pretty simple and easy to add to a custom collection object. It brings a suite of great functions for your use. What you’re essentially setting up when you implement the Sequence and IteratorProtocol protocols is the instruction for  enumeration.. which is the functionality at the core of all functions provided by Sequence. Well done Swift writers!</p>



	</div>

</section>

		</div>

	</div>


	<footer class="footer">

	<ul class="socials">
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
</ul>

	<div class="footer__copyright">
		<span>© 2019 Julietta Yaunches</span>		
	</div>

</footer>


	<!-- Javascript Assets -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script src="/js/index-min.js"></script>

	
	<!-- Extra Footer JS Code -->
	
	


</body>

</html>