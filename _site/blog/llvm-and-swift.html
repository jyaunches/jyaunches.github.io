<!doctype html>

<html class="no-js" lang="en">

<head>


	<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

	Julietta Yaunches

	- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->


	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

	<!-- Page Info -->
	<link rel="shortcut icon" href="/images/favicon.png">
	<title>Swift - Child of the LLVM – Julietta Yaunches</title>
	<meta name="description" content="">

	<!-- Twitter Card -->
	<meta name="twitter:card" content="summary_large_image">
	<meta name="twitter:title" content="Swift - Child of the LLVM – Julietta Yaunches">
	<meta name="twitter:description" content="">
	<meta name="twitter:image:src" content="http://localhost:4000/images/swift-llvm/article-tile.png">

	<!-- Facebook OpenGraph -->
	<meta property="og:title" content="Swift - Child of the LLVM – Julietta Yaunches" />
	<meta property="og:description" content="" />
	<meta property="og:image" content="http://localhost:4000/images/swift-llvm/article-tile.png" />

	
	<!-- Font Embed Code -->
	<link href="https://fonts.googleapis.com/css?family=Montserrat:300,500" rel="stylesheet">
	

	<!-- Styles -->
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="/css/style.css">
	
	<!-- Icons -->
	<script defer src="https://use.fontawesome.com/releases/v5.1.1/js/solid.js" integrity="sha384-GXi56ipjsBwAe6v5X4xSrVNXGOmpdJYZEEh/0/GqJ3JTHsfDsF8v0YQvZCJYAiGu" crossorigin="anonymous"></script>
	<script defer src="https://use.fontawesome.com/releases/v5.1.1/js/brands.js" integrity="sha384-0inRy4HkP0hJ038ZyfQ4vLl+F4POKbqnaUB6ewmU4dWP0ki8Q27A0VFiVRIpscvL" crossorigin="anonymous"></script>
	<script defer src="https://use.fontawesome.com/releases/v5.1.1/js/fontawesome.js" integrity="sha384-NY6PHjYLP2f+gL3uaVfqUZImmw71ArL9+Roi9o+I4+RBqArA2CfW1sJ1wkABFfPe" crossorigin="anonymous"></script>

	
	<!-- Custom Styles -->
	<style></style>
	

	
	<!-- Analytics Code -->
	
	

	
	<!-- Extra Header JS Code -->
	
	
	
</head>


<body class="loading ajax-loading" data-site-url="http://localhost:4000" data-page-url="/blog/llvm-and-swift">


	<header class="header">

	<div class="header__content">

		
		<a href="/" class="header__title">
			Julietta Yaunches
		</a>
		

		<h1 class="header__tagline">Technologist, mobile architect and community leader based in Brooklyn, NY.</h1>

		<div class="menu">
			<div class="menu__toggle js-menu-toggle">
				<div class="menu__toggle__icon"><span></span></div>
			</div>
			<div class="menu__wrap">
				<ul class="menu__list">
					
					<li class="menu__list__item">
						<a href="https://yaunch.notion.site/AI-Career-Pivot-c72ead2258344fca913e5d786b71b6da?pvs=4" class="menu__list__item__link">AI Career pivot</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/blog/" class="menu__list__item__link">Blog</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/speaking/" class="menu__list__item__link">Speaking</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/brooklyn_swift/" class="menu__list__item__link">Brooklyn Swift</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/about" class="menu__list__item__link">About</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/contact" class="menu__list__item__link">Contact</a>
					</li>
					
				</ul>
			</div>
		</div>

		<div class="projects-menu">
			<ul class="menu__list">
				
				<li class="menu__list__item">
					<a href="/project/flexible-tech-experimentation" class="menu__list__item__link">Flexible Tech & Experimentation</a>
				</li>
				
				<li class="menu__list__item">
					<a href="/project/uikonf-consistency-principle" class="menu__list__item__link">UIKonf - May 2019</a>
				</li>
				
				<li class="menu__list__item">
					<a href="/project/ioscon-london-llvm-and-abi-stability" class="menu__list__item__link">iOSCon Lightning Talk - March 2019</a>
				</li>
				
				<li class="menu__list__item">
					<a href="/project/ioscon-london-architecture-roadmapping-refactor-v-rewrite" class="menu__list__item__link">iOSCon Speaker - March 2019</a>
				</li>
				
				<li class="menu__list__item">
					<a href="/project/rewrite-versus-refactor" class="menu__list__item__link">Technology Roadmap: Rewrite vs Refactor</a>
				</li>
				
			</ul>
		</div>

		<div class="header__lower">

			<ul class="socials">
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
</ul>

			<div class="footer__copyright">
				<span>© 2024 Julietta Yaunches</span>
			</div>

		</div>

	</div>

</header>


	<div class="loader"><svg width="120" height="30" viewBox="0 0 120 30" xmlns="http://www.w3.org/2000/svg"><circle cx="15" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite" /><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite" /></circle><circle cx="60" cy="15" r="9" fill-opacity="0.3"><animate attributeName="r" from="9" to="9" begin="0s" dur="0.8s" values="9;15;9" calcMode="linear" repeatCount="indefinite" /><animate attributeName="fill-opacity" from="0.5" to="0.5" begin="0s" dur="0.8s" values=".5;1;.5" calcMode="linear" repeatCount="indefinite" /></circle><circle cx="105" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite" /><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite" /></circle></svg></div>

	<div class="page-loader"></div>

	
	<div class="page">

		<div class="page__content" data-page-title="Swift - Child of the LLVM – Julietta Yaunches">

			<section class="intro">

	<div class="wrap">

		<h1>Swift - Child of the LLVM</h1>
		<p>05 July 2017</p>

	</div>

</section>

<section class="single">

	<div class="wrap">

		<p>This post is the second in a series on the LLVM (Apple’s compilation tool chain pioneered by Chris Lattner). The first post spoke about the compilation project at a high level, broadly outlining it’s history and the reasons Apple adopted and developed it.</p>

<p>With this article, I want to look more in depth at how the LLVM enabled Swift to advance beyond Objective-C and what benefits this has brought.</p>

<p>Swift came about as direct result of Apple’s adoption and advancement of the LLVM compiler. See the <a href="http://yaunch.io/llvm-introduction/">first article</a> in this series for more details on this. We’ll review briefly here for context!</p>

<h2 id="llvm-project">LLVM Project</h2>

<p>The LLVM compiler project was started by Chris Lattner at the University of Illinois. Apple became interested in it for both it’s ‘language-agnostic’ design but also the potential to more easily compile to many target architectures.</p>

<p>The benefits brought by the LLVM did allow Apple to progress Objective C and it’s development toolset. However, in 2010 the LLVM reached a point where it could support more features than could be added to Objective C. This is when development of Swift started.</p>

<h2 id="llvm-advances--obj-c">LLVM Advances &amp; Obj-C</h2>

<p>While Apple was adopting the LLVM/Clang and using it to move Obj-C forward we saw significant improvements. Notable were:</p>

<table>
  <thead>
    <tr>
      <th>Advancement</th>
      <th>Release</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Support Blocks</td>
      <td>iOS4 / 2010</td>
      <td>Lanuage-level feature allowing creation of distint segments of code that can be passed around to methods or functions as it they were values</td>
    </tr>
    <tr>
      <td>ARC</td>
      <td>iOS4.3 / 2011</td>
      <td>Eliminated the need for programmers to manually manage retain counts.</td>
    </tr>
    <tr>
      <td>Collection Literals</td>
      <td>iOS6 / 2012</td>
      <td>Allowed: NSArray *instruments = @[@”Flute”]</td>
    </tr>
    <tr>
      <td>Modules.</td>
      <td>iOS7 / 2013</td>
      <td>Improvement to code reuse / library importing. Modules are compiled as stand alone libraries, making multiple references to the same module easier and more efficient</td>
    </tr>
  </tbody>
</table>

<h2 id="llvm-advances--swift">LLVM Advances &amp; Swift</h2>

<p>A primary motivation for Swift was definitely to piggy-back and continue to utilize the advancements of the LLVM toolchain. It’s notable that there also were other great reasons to introduce a new more accessible language. New developer ramp-up for one. Obj-C is not the easiest first progamming language to master.</p>

<p>Probably feature objectives with Swift development:</p>

<table>
  <thead>
    <tr>
      <th>Objective</th>
      <th>Language Direction</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Increased accessibility to new developers</td>
      <td>- Modern language syntax<br />- Visibility into ARC completely removed</td>
    </tr>
    <tr>
      <td>Advanced language features that won’t slow runtime</td>
      <td>SIL (Swift Intermediary Language)</td>
    </tr>
    <tr>
      <td>Reduce Crashes</td>
      <td>- Strongly Typed<br />- Increased compiler error detection<br />- Optionals</td>
    </tr>
  </tbody>
</table>

<h3 id="sil">SIL</h3>

<p>With Swift, the compilation team decided to introduce a new intermediary language to enable both language features and improved compilation. The flexibility of LLVM allowed them to do this and slot it right into the existing compilation flow</p>

<div class="gallery" data-columns="1">
	<img src="/images/swift-llvm/SIL-in-compilation-flow.png" />
</div>

<p>A huge source of info on this was a talk given at the 2015 LLVM Developers’ Meeting. Check this out. It’s fascinating.</p>

<iframe width="560" height="315" src="https://www.youtube.com/embed/Ntj8ab-5cvE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>

<h3 id="benefits">Benefits</h3>

<p>As stated in the talk linked above, SIL enables a wider gap between source (Swift) semantics &amp; IR semantics during compilation. This has a few notable benefits:</p>

<h4 id="language-evolution">Language evolution</h4>
<p>SIL allows Swift language writers to write more of the language in the language</p>

<h4 id="safety">Safety</h4>
<p>SIL allows for compiler errors on things like uninitialize vars and unreachable code</p>

<h4 id="generics">Generics</h4>
<p>A really interesting example of compilation strategy impacting language features</p>

<ul>
  <li>SIL allows for a generics model that supports dynamic dispatch &amp; separate compilation. This is instead of being dependent on <em>template instantiation</em> like Obj-C &amp; C++… which uses a runtime strategy that can slow execution down.</li>
  <li>In more simple languages, dynamic dispatch &amp; separate compilation is a strategy that uses in-lining of concrete type function definition at compile time. This leaves the impact of generics at runtime basically non-existent. Check out <a href="https://swift.org/blog/whole-module-optimizations/">this page</a> on how it’s done.</li>
  <li>FYI this is called function <em>specialization</em>.</li>
</ul>

<h2 id="summing-it-up">Summing it Up</h2>

<p>It’s super relevant as an engineer following the Swift language to understand how it’s design was so hugely related to advancements made to the LLVM during the period Apple was championing this toolchain. It not only gives great context behind the language features we’ve seen rolled out so far.. but provides indication for what may lie ahead for this still young language!</p>



	</div>

</section>

		</div>

	</div>


	<footer class="footer">

	<ul class="socials">
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
</ul>

	<div class="footer__copyright">
		<span>© 2024 Julietta Yaunches</span>		
	</div>

</footer>


	<!-- Javascript Assets -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script src="/js/index-min.js"></script>

	
	<!-- Extra Footer JS Code -->
	
	


</body>

</html>